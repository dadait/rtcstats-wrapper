<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BaseRTCStatsReport.html">BaseRTCStatsReport</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BaseRTCStatsReport.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BaseRTCStatsReport.html#has">has</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ChromeRTCStatsReport.html">ChromeRTCStatsReport</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChromeRTCStatsReport.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChromeRTCStatsReport.html#has">has</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="FirefoxRTCStatsReport.html">FirefoxRTCStatsReport</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FirefoxRTCStatsReport.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="FirefoxRTCStatsReport.html#has">has</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RTCStatsInsight.html">RTCStatsInsight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTCStatsInsight.html#stop">stop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTCStatsInsight.html#watch">watch</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RTCStatsMoment.html">RTCStatsMoment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTCStatsMoment.html#report">report</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTCStatsMoment.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SafariRTCStatsReport.html">SafariRTCStatsReport</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SafariRTCStatsReport.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SafariRTCStatsReport.html#has">has</a></span></li><li class="nav-heading">Events</li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:audio-fractionLost">audio-fractionLost</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:audio-jitter">audio-jitter</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:audio-jitterBufferDelay">audio-jitterBufferDelay</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:audio-rtt">audio-rtt</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:rtt">rtt</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:video-fractionLost">video-fractionLost</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:video-jitter">video-jitter</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:video-jitterBufferDelay">video-jitterBufferDelay</a></span></li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="RTCStatsInsight.html#event:video-rtt">video-rtt</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#RTCStatsInsightEvents">RTCStatsInsightEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#RTCStatsReferences">RTCStatsReferences</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#standardizeReport">standardizeReport</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#StatusLevels">StatusLevels</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>rtcstats-wrapper</h1>
<p>A wrapper of RTCStats for standardization and calculation of momentary values.</p>
<h4>features</h4>
<ul>
<li>Standardize a result of <a href="https://w3c.github.io/webrtc-stats/">getStats()</a> which is different between each browsers.</li>
<li>Calculate momentary status (such as <code>jitterBufferDelay</code> at one moment) from a result of getStats().</li>
</ul>
<h2>Getting Started</h2>
<h3>Installation</h3>
<pre class="prettyprint source lang-bash"><code>npm install https://github.com/skyway-lab/rtcstats-wrapper.git
</code></pre>
<h3>Usage</h3>
<h4>RTCStats standardizers</h4>
<p>Since the implementation of getStats varies between each browsers, you need a shim to standardize them when you use RTCStats in your cross-browser application.
<code>rtcstats-wrapper</code> gives it and supports Google Chrome, Firefox and Safari.</p>
<p>see <a href="https://skyway-lab.github.io/rtcstats-wrapper/global.html#standardizeReport">reference</a></p>
<pre class="prettyprint source lang-javascript"><code>import { standardizeReport, RTCStatsReferences } from 'rtcstats-wrapper';

const pc = new RTCPeerConnection();
//  ...

const report = standardizeReport(await pc.getStats());
const receiverStats = report.get(RTCStatsReferences.RTCVideoReceivers.key);
const framesDecoded = receiverStats[0].framesDecoded;
// ...
</code></pre>
<h4>RTCStatsMoment</h4>
<p>Since RTCStats shows statical information, most of its attributes mean total number of each metrics.
Therefore, you need a little calculation to get how network or media pipeline perform at that moment, so we provide the API to get the momentary metrics based on the RTCStats.
After established the connection with <code>RTCPeerConnection</code>, then like</p>
<p>see <a href="https://skyway-lab.github.io/rtcstats-wrapper/RTCStatsMoment.html">reference</a></p>
<pre class="prettyprint source lang-javascript"><code>import { RTCStatsMoment } from 'rtcstats-wrapper';

const pc = new RTCPeerConnection();
const moment = new RTCStatsMoment();
// establish a conneciton ...

const report = await pc.getStats();
moment.update(report);
moment.report();
//=> {
//    &quot;send&quot;: {
//        &quot;video&quot;: { ... },
//        &quot;audio&quot;: { ... },
//    },
//    &quot;receive&quot;: {
//        &quot;video&quot;: { ... },
//        &quot;audio&quot;: { ... },
//    },
//    &quot;candidatePair&quot;: { ... }
//}
</code></pre>
<h4>RTCStatsInsight</h4>
<p>As one simple use case of RTCStatsMoment I know, is to calculate an momentary value periodically and take some action when a certain threshold is exceeded.
For example, collect occurrences of events to analyze user's network environment information, or give some feedback to the UI to reduce stress caused by call quality felt by users.
RTCStatsInsight is a simple way to do this, and provides an EventEmitter interface as follows:</p>
<p>see <a href="https://skyway-lab.github.io/rtcstats-wrapper/RTCStatsInsight.html">reference</a></p>
<pre class="prettyprint source lang-javascript"><code>import {
  StatusLevels,
  RTCStatsInsightEvents,
  RTCStatsInsight
} from 'rtcstats-wrapper';

const options = {
  interval: 3000,
  thresholds: {
    &quot;audio-rtt&quot;: {
      unstable: 0.1
    },
    &quot;audio-fractionLost&quot;: {
      unstable: 0.03,
      critical: 0.08,
    },
  },
  triggerCondition: {
    failCount: 2,
    within: 3
  }
}

const insight = new RTCStatsInsight(sender, options);

insight.on(RTCStatsInsightEvents[&quot;audio-rtt&quot;].key, event => {
  if (event.level === StatusLevels.stable.key) {
    console.log(&quot;Now back to stable!&quot;);
  }
});

insight.watch()
</code></pre>
<h2>API Reference</h2>
<p>see <a href="http://skyway-lab.github.io/rtcstats-wrapper/">GitHub Pages</a>.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Jul 23 2019 18:00:42 GMT+0900 (Japan Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>